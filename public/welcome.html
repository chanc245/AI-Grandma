<html lang="en">
<body onload="formatAMPM()">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="assets/img/grannybytes_favicon.png" type="image/x-icon">

    <title>Welcome to Granny Bytes</title>
  </head>
  <body>
    <img class="overlay" src="assets/img/noiseoverlay.png"/>

    <audio src="assets/audio/sizzle.wav"></audio>

    <div class="main-container">
      <div class="mitty-container hidden" id="appear">
        <img class="mitty" id="mittyGif" src="./assets/img/Mitty/icon_Mitty.png"/>
        <img class="speechbubble" src="assets/img/UI/icons/speech-bubble.png"/>
        <img class="mitty-bar" src="assets/img/UI/topbar/mitty_hints_topbar.png"/>
        <p class="mitty-text">Welcome to your desktop! To enter Granny Bytes and start cooking, click the cooking pot icon on the stove.</p>
      </div>
      <div class="grandma-app">
        <a href="./login.html">
          <div class="open-app"></div>
        </a>
      </div>
    <div class="footer">
      <div class="scene-info">
        <img src="./assets/img/UI/icons/icon_ Welcome.png">
        <p class="scene-info">Welcome to Granny Bytes</p>
        </div>
        <p class="scene-info" id="time">12:00PM</p>
      </div>
    </div>

  <!-- COMPUTER FRAME -->
    <div class="com-frame">
      <div class="com-bot-bar">
        <div class="bot-bar-container">
          <img src="./assets/img/retro-computer/com-connect-noclick.svg" class="bot-bar-svg">
          <img src="./assets/img/retro-computer/com-left-noclick.svg" class="bot-bar-svg">
          <img src="./assets/img/retro-computer/com-up-noclick.svg" class="bot-bar-svg">
          <img src="./assets/img/retro-computer/com-down-noclick.svg" class="bot-bar-svg">
          <img src="./assets/img/retro-computer/com-right-noclick.svg" class="bot-bar-svg">
          <div class="power-light"></div>
          <div class="power-btn" onclick="togglePower()"></div> 
        </div>    
      </div>
    </div>
    <div class="com-screen-off"></div>
    <!-- COMPUTER FRAME -->

  </body>
  
  <script src="time.js"></script>

  <script>
    const audio = document.querySelector("audio");
    window.addEventListener("click", event => {
      audio.play();
      audio.volume = 0.2;
    });

    function togglePower() {
      const light = document.querySelector('.power-light');
      const screenOff = document.querySelector('.com-screen-off');
      const audio = document.querySelector("audio");

      // Toggle power light
      if (light.style.backgroundImage.includes('com-power-light-on.svg')) {
        light.style.backgroundImage = "url('./assets/img/retro-computer/com-power-light-off.svg')";
        audio.volume = 0;
      } else {
        light.style.backgroundImage = "url('./assets/img/retro-computer/com-power-light-on.svg')";
        audio.volume = 0.2
      }

      // Toggle screen visibility
      if (screenOff.style.display === "none") {
        screenOff.style.display = "block";
      } else {
        screenOff.style.display = "none";
      }
    }

     // MITTY INTERACTION //
      let mittyUrls = [
        "./assets/img/Mitty/icon_Mitty.png",
        "./assets/img/Mitty/icon_Mitty_close.png"
      ];

      let currentMitty = 0;
      let mittyGif = document.getElementById("mittyGif");
      
      setInterval(function() {
        currentMitty = (currentMitty + 1) % mittyUrls.length;
        mittyGif.src = mittyUrls[currentMitty];
      }, 1500);

      document.addEventListener("DOMContentLoaded", function() {

        let mittyGif = document.getElementById("mittyGif");
        mittyGif.addEventListener("click", function() {
          mittyGif.src = "./assets/img/Mitty/icon_Mitty_click.png"; 

          setTimeout(function() {
              mittyGif.src = "./assets/img/Mitty/icon_Mitty.png";
          }, 300);
        });
      });
      // MITTY INTERACTION //
  </script> 
  </html>
